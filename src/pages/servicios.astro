---
import Header from "../components/Header.astro";
import SecondHeader from "../components/SecondHeader.astro";
import Layout from "../layouts/Layout.astro";
---

<Layout>
  <div class="block lg:hidden">
    <Header />
  </div>

  <!-- Show SecondHeader on desktop -->
  <div class="hidden lg:block">
    <SecondHeader />
  </div>

  <section class="px-4 py-12 lg:px-0">
  <header class="mx-auto mb-12 max-w-7xl space-y-4">
    <h2 class="text-3xl font-medium text-[#051314]">Qué hacemos</h2>
    <p class="text-xl text-[#051314]">
        Ofrecemos soluciones constructivas a medida, tanto en el ámbito público como privado. Desde viviendas y edificios institucionales hasta obras de infraestructura urbana. Explorá nuestras áreas de especialización.
    </p>
  </header>

  <section
    class="max-w-7xl lg:px-0 mx-auto grid gap-8 md:gap-10 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 pb-12"
  >
    <!-- We add "service-card" to each article for the script -->
    <!-- We also add `group-[.is-active]:` to the overlay classes -->

    <!-- Article 1 -->
    <article
      class="service-card group relative w-full h-96 rounded-2xl overflow-hidden shadow-lg cursor-pointer"
    >
      <div
        class="absolute inset-0 bg-cover bg-center transition-transform duration-500 ease-in-out scale-110 group-hover:scale-100 group-[.is-active]:scale-100"
        style="background-image: url('/servicios/educacion.png')"
      >
      </div>
      <div
        class="absolute bottom-0 left-0 w-full h-1/3 bg-gradient-to-t from-black/80 to-transparent p-6 flex flex-col justify-end
               opacity-0 translate-y-8 group-hover:opacity-100 group-hover:translate-y-0 group-[.is-active]:opacity-100 group-[.is-active]:translate-y-0 transition-all duration-500 ease-in-out"
      >
        <h3 class="text-white text-2xl font-bold">Educacion y Salud</h3>
        <p class="text-white/80 text-sm mt-1">
          Un espacio diseñado para el cuidado y la recuperación.
        </p>
      </div>
    </article>

    <!-- Article 2 -->
    <article
      class="service-card group relative w-full h-96 rounded-2xl overflow-hidden shadow-lg cursor-pointer"
    >
      <div
        class="absolute inset-0 bg-cover bg-center transition-transform duration-500 ease-in-out scale-110 group-hover:scale-100 group-[.is-active]:scale-100"
        style="background-image: url('/servicios/industrial.png')"
      >
      </div>
      <div
        class="absolute bottom-0 left-0 w-full h-1/3 bg-gradient-to-t from-black/80 to-transparent p-6 flex flex-col justify-end
               opacity-0 translate-y-8 group-hover:opacity-100 group-hover:translate-y-0 group-[.is-active]:opacity-100 group-[.is-active]:translate-y-0 transition-all duration-500 ease-in-out"
      >
        <h3 class="text-white text-2xl font-bold">Industrial</h3>
        <p class="text-white/80 text-sm mt-1">
          Inspirando a las nuevas generaciones a través de la arquitectura.
        </p>
      </div>
    </article>

    <!-- Article 3 -->
    <article
      class="service-card group relative w-full h-96 rounded-2xl overflow-hidden shadow-lg cursor-pointer"
    >
      <div
        class="absolute inset-0 bg-cover bg-center transition-transform duration-500 ease-in-out scale-110 group-hover:scale-100 group-[.is-active]:scale-100"
        style="background-image: url('/servicios/comercial.png')"
      >
      </div>
      <div
        class="absolute bottom-0 left-0 w-full h-1/3 bg-gradient-to-t from-black/80 to-transparent p-6 flex flex-col justify-end
               opacity-0 translate-y-8 group-hover:opacity-100 group-hover:translate-y-0 group-[.is-active]:opacity-100 group-[.is-active]:translate-y-0 transition-all duration-500 ease-in-out"
      >
        <h3 class="text-white text-2xl font-bold">Comercial</h3>
        <p class="text-white/80 text-sm mt-1">
          Conectando personas en un entorno moderno y funcional.
        </p>
      </div>
    </article>

    <!-- Article 4 -->
    <article
      class="service-card group relative w-full h-96 rounded-2xl overflow-hidden shadow-lg cursor-pointer"
    >
      <div
        class="absolute inset-0 bg-cover bg-center transition-transform duration-500 ease-in-out scale-110 group-hover:scale-100 group-[.is-active]:scale-100"
        style="background-image: url('/servicios/instalaciones.png')"
      >
      </div>
      <div
        class="absolute bottom-0 left-0 w-full h-1/3 bg-gradient-to-t from-black/80 to-transparent p-6 flex flex-col justify-end
               opacity-0 translate-y-8 group-hover:opacity-100 group-hover:translate-y-0 group-[.is-active]:opacity-100 group-[.is-active]:translate-y-0 transition-all duration-500 ease-in-out"
      >
        <h3 class="text-white text-2xl font-bold">Instalaciones</h3>
        <p class="text-white/80 text-sm mt-1">
          Viviendas que combinan confort, diseño y vistas únicas.
        </p>
      </div>
    </article>

    <!-- Article 5 -->
    <article
      class="service-card group relative w-full h-96 rounded-2xl overflow-hidden shadow-lg cursor-pointer"
    >
      <div
        class="absolute inset-0 bg-cover bg-center transition-transform duration-500 ease-in-out scale-110 group-hover:scale-100 group-[.is-active]:scale-100"
        style="background-image: url('/servicios/publica.png')"
      >
      </div>
      <div
        class="absolute bottom-0 left-0 w-full h-1/3 bg-gradient-to-t from-black/80 to-transparent p-6 flex flex-col justify-end
               opacity-0 translate-y-8 group-hover:opacity-100 group-hover:translate-y-0 group-[.is-active]:opacity-100 group-[.is-active]:translate-y-0 transition-all duration-500 ease-in-out"
      >
        <h3 class="text-white text-2xl font-bold">
          Ingenieria y obra publica
        </h3>
        <p class="text-white/80 text-sm mt-1">
          Espacios de trabajo que fomentan la colaboración y la
          productividad.
        </p>
      </div>
    </article>
  </section>
  </section>
</Layout>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    // Select all service cards
    const serviceCards = document.querySelectorAll(".service-card");

    // Function to remove the 'is-active' class from all cards
    const deactivateAllCards = () => {
      serviceCards.forEach((card) => {
        card.classList.remove("is-active");
      });
    };

    serviceCards.forEach((card) => {
      card.addEventListener("click", (event) => {
        // Check if the clicked card was already active
        const wasActive = card.classList.contains("is-active");

        // First, deactivate all cards
        deactivateAllCards();

        // If the card was not active, activate it now.
        // This makes the card a "toggle" - tap once to open, tap again to close.
        if (!wasActive) {
          card.classList.add("is-active");
        }

        // Stop the click from bubbling up to the document listener, which would close the card immediately
        event.stopPropagation();
      });
    });

    // Add a click listener to the whole page to close any active card when clicking outside
    document.addEventListener("click", () => {
      deactivateAllCards();
    });
  });
</script>
